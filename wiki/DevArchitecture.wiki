#summary General architecture of Dev

= Directories =

When Dev starts, its first job is to find the ProjectDirectory and the TaskDirectory.  It begins by searching upward (from the current directory to the root) for a file named {{{.devrc}}}.  The directory containing this file is designated the ProjectDirectory, and its full path is recorded in `$DEV_PROJECT_DIR`.  For all but the `project` subcommand, Dev stops processing immediately if it cannot find a project directory.  To find the task directory, Dev searches upward for a file named {{{.task}}}.  The directory containing this file, if one is found, is designated the TaskDirectory, and its full path is recorded in `$DEV_TASK_DIR`.  Failure to find a task directory is not fatal.

= Configuration =

Dev next loads the configuration for the task.  First, it sources {{{.devrc}}} to load the configuration for the ProjectDirectory.  Then, it sources {{{.task}}} to load the [TaskDirectory]'s configuration.  This file should begin with a line of the form
{{{
tasktype TTYP
}}}
which invokes a shell function that searches for {{{{TTYP.dev}}} in `$DEV_TASKTYPES_DIR`, and sources it.

The end result is that the configuration is read in this order:
  * ProjectDirectory configuration
  * TaskType configuration
  * TaskDirectory configuration

= Subcommands =

Dev Next examines its first argument to determine the name of the subcommand to run.  It searches for a file by that name in its own subcommands directory, followed by each directory in the colon-separated `$DEV_SUBCOMMANDS_PATH`.  By default, this path contains the `dev/subcommands` subdirectory of `$DEV_PROJECT_DIR`, but it can be overridden in any of the configuration files.

= Requirements =

If the subcommand script requires functionality provided by a specific extension, it declares so with a line of the form
{{{
require EXTNAME
}}}
which loads the extension's {{{require.sh}}}, defining some useful functions, variables, etc.

= Loading Sources =

The BaseExtension actually takes care of loading sources, but it is a critical part of the operation of Dev.  TaskTypes specify one or more [Loaders] via `$[Sources SOURCES]`.  Follow the links for additional information.
